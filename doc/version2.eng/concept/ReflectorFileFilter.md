# File filter

Technique to describe conditions of selection required files for some operation on group of files. Reflector has two file filters: <code>src</code> and <code>dst</code>.

До файлових фільтрів відносяться прості фільтри, маски файлових операцій, часові фільтри та, додатково, опції управління файлами і директоріями.  

### Прості фільтри рефлектора  
Прості фільтри - це фільтри, які сортують файли за назвою.
`begins` - включає в вибірку всі файли в директорії, назва яких починається з указаного в фільтрі слова.  
`ends` - включає в вибірку всі файли, назва яких закінчується на вказане в фільтрі слово.  
`hasExtension` - якщо розширення файла співпадає з вказаним в фільтрі, то файл буде включений в вибірку. Розширення файла може бути складним і утиліта `willbe` зчитує його, починаючи з першої крапки в назві файла. Наприклад, файл `somefile.txt.md` має два розширення - `txt` i `md`.    
Приклад запису простого фільтра:  
```yaml
src:
  begins:
    - 'file'

```

### Маски рефлектора  
Маски слугують для фільтрування файлових операцій в системі. Фільтрування може проходити на рівні терміналу операційної ситеми або ж в директорії розміщення файлів.  
Рефлектори `willbe` використовують три типи масок:  
`maskDirectory` - маска директорії, фільтрує файлові операції у вказаній директорії;  
`maskTerminal` - маска терміналу операційної системи, фільтрує консольні операції;  
`maskAll` - одночасно фільтрує всі файлові операції.
Маски використовують спеціалізовані поля, які можуть приймати прямі значення або ж синтаксис регулярних виразів JavaScript. До цих полів відносяться:
`includeAny` - включити в вибірку будь-який елемент з вказаним параметром;  
`includeAll` - включити в вибірку всі знайдені елементи з вказаним параметром;  
`excludeAny` - виключити з вибірки будь-який елемент з вказаним параметром;  
`excludeAll` - виключити з вибірки всі елементи з вказаним параметром.
Приклад масок в рефлекторі:

```yaml
src :
  maskDirectory :
    includeAll : !!js/regexp '/\.js$/'  
    excludeAny : !!js/regexp '/\.cson$/'  

```

Цей запис означає, включити в вибірку всі файли з розширенням '.js' та виключити будь-які файли з розширенням '.cson' в директорії.  

### Часові фільтри  
Фільтри необхідні для обмеження вибору по часовим критеріям. Рефлектори мають чотири часових фільтра: `notOlder`, `notNewer`, `notOlderAge`, `notNewerAge`. В параметрах полів вносяться значення в мілісекундах (1 с = 1000 мс; 1 год = 3600000 мс).  
Часові фільтри мають такі значення:
`notOlder` - всі файли не старше від встановленого на момент виконання побудови;  
`notNewer` - всі файли не новіше від встановленого на момент виконання побудови;
`notOlderAge` - вік окремих файлів, не більше від встановленого на момент виконання побудови;  
`notNewerAge` - вік окремих файлів, не менше від встановленого на момент виконання побудови.
Приклад, де вибираються файли не старіші від 10 с:

```yaml
src :
  notOlder : 10000

```

### Управління директоріями і файлами  
При виконанні файлових операцій рефлектори можуть керувати доступом до окремих файлів і директорій. Для цього в полі `filePath` встановлюються значення `0` і `1` або `true` i `false` для відповідних шляхів.
Приклад, де включено директорію за шляхом `files/files.two` i вимкнено директорію `proto`:  

```yaml
src:
  filePath:
    files/files.two : 1
    proto : false

```
