# Рефлектори в will-файлах

В керівництві користувача описуються рефлектори - призначення, особливості побудови, використання

Зміст керівництва  
[Поняття рефлектора](#reflector-term)  
[Структура рефлектора](#reflector-structure)  
- [Шляхи](#reflector-pathes)  

[Приклади використання]()  

### <a name="reflector-term"></a> Поняття рефлектора  
Рефлектор - це не тільки назва секції, чи одна функція пакета `willbe`, а набір функціональностей для ефективного управління файловими ресурсами модульної системи. Основними функціями є сортування, групування файлів, копіювання та переміщення.

### <a name="reflector-resource-structure"></a> Структура ресурсу рефлектора 
Ресурс рефлектора, як і інших складається з набору полів. До стандартних відносяться `description` - опис рефлектора, `criterion` - для порівняння мапи критеріонів при виборі рефлектора, `inherit` - наслідування користувацьких сценаріїв або вбудованих рефлекторів. Є ще чотири унікальних поля: `recursive` - замикання процедури вибору файлів на себе з умовою виходу; `filePath` - шлях до файлів модуля; `src` - ресурси (шляхи) звідки буде зчитано файли; `dst` - директорія в яку будут поміщено файли.  
Поля `filePath`, `src`, `dst` мають ресурси які структурно розділені на шляхи, маски і фільтри.  
Дослідимо структуру і формат ресурсів.   
##### <a name="reflector-pathes"></a> Шляхи 
Використовується поля `basePath`, `prefixPath` i `filePath`.  

`basePath` - базовий, основний шлях до файлів рефлектора. Подібно до шляху `in` в секції `step`, задає початкову точку відліку для шляхів. Може включати декілька базових шляхів для різних файлів.  

```yaml
src :
  basePath :
    'some/file1' : './dir1'
    'some/file2' : './dir2'
  
```

Вказаний ресурс означає, що для `file1`, який знаходиться за шляхом `/some`, базовий шлях починається з директорії `./dir1` в кореневому каталозі `will`-файла. Для другого файла відповідно базовий шлях починається від директорії `./dir2`.  

`prefixPath` - шлях, який додається до `basePath` при створенні модуля.  
Тобто, якщо в полі вказаний `basePath` незалежно від `prefixPath`, то цей шлях є і базовим, і повним, а якщо разом з `prefixPath`, то до нього потрібно додавати префікс із шляху в `prefixPath`.

```yaml
src :
  basePath : '.'
  prefixPath : 'out/out.debug'
dst :
  basePath : '..'
  
```

Приклад показує, що файли будуть братись в директорії за шляхом `./out/out.debug/`, а поміщені в директорію на рівень вище від кореневої директорії `will`-файла.  

`filePath` - поле може бути незалежним або включеним в ресурси `src` i `dst` та позначає відповідні шляхи до файлів модуля. Поле має структуру "ключ-значення", де ключем є шлях до файла, а значенням - його істинність (_true, false_), якщо значення не вказане, то за замовчуванням `true`. Також, значенням може бути інша директорія - виконання операції копіювання.  
