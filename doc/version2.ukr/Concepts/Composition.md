# Внутрішня будова 

### <a name="section"></a>Секція
**Секція** - вища структурна одиниця `will-файла`, яка складається з ресурсів одного типу. Є шість секцій для побудови модуля користувачем: `about`, `path`, `submodule`, `step`, `reflector`, `build` та одна секція, яка генерується утилітою `willbe` при експорті модуля - секція `exported`. Порядок розташування і кількість секцій в `will-файлі` визначається його призначенням.  
Приклад `will-файла`:  

![will.file.inner.png](./Images/will.file.inner.png)  

### <a name="resource"></a>Ресурси
**Ресурси** - елементи `will-файла`, які позначають певну функціональність. Ресурси секцій позначаються декларативно, тобто, вказується лише результат, який потрібно отримати, а послідовність дій для отримання результату опускається.  
Вигляд ресурсів окремих секцій відрізняється. На рисунку ресурс `Tools` секції `submodule` має скорочену форму запису, а ресурс `npm.install` секції `step` - повну (розширену):

![resource.png](./Images/resource.png)

### Опис секцій  
[**About.**](#about) В секції поміщено основну інформація про модуль - назва, версія, опис...    
Структура полів секції `about`:  

| Поле           | Опис                                    |
|----------------|-----------------------------------------|
| name           | назва модуля                            |
| description    | опис модуля - призначення, ліцензія, автори та ін.    |
| version        | версія модуля - для позначення прогресу розробки та стану продукту             |
| enabled        | поле, яке генерується в оперативну пам'ять утилітою `willbe` для виконання побудови; значення за замовчуванням '1' |
| interpreters   | інтерпретатори, які потрібні модулю     |
| keywords       | ключові слова                           |  

[**Path.**](#path) Секція представляє карту шляхів модуля для швидкого орієнтування в його структурі. Секція має три вбудовані шляхи: `in`, `out` та `temp`. Директорія на яку вказує `in` - точка відліку для відносних шляхів модуля, тобто, утиліта `willbe` зчитує шлях до ресурсу відносно каталогу `in`, `out` - директорія для експортованих модулів, `temp` - поміщаються тимчасові файли. Якщо `in` не вказаний, то `willbe` починає відлік від кореневої директорії `will`-файла.  
Ресурси секції `path` включають поля:   

| Поле           | Опис                                        |
|----------------|---------------------------------------------|
| path           | шлях до директорії (абсолютний, відносний)  |
| description    | опис директорії                             |
| criterion      | умова використання ресурса (див. критеріон) |
| inherit        | наслідування значень полів іншого ресурса   |  

[**Submodule.**](#submodule) В секції вказуються підмодулі.  
Ресурси секції `submodule` включають поля:  

| Поле           | Опис                                           |
|----------------|------------------------------------------------|
| path           | шлях до підмодуля (абсолютний, відносний, URL) |
| description    | опис підмодуля                                 |
| criterion      | умова використання ресурса (див. критеріон)    |
| inherit        | наслідування значень полів іншого ресурса      |  

[**Step**](#step) Ресурси секції (кроки) описують процедури побудови модуля. Кроки поміщають в сценарії збірок секції `build` для виконання побудови.  
Ресурси секції `step` включають поля:   

| Поле           | Опис                                        |
|----------------|---------------------------------------------|
| description    | опис кроку (процедури)                      |
| criterion      | умова використання ресурса (див. критеріон) |
| opts           | процедура побудови модуля                   |
| inherit        | наслідування значень полів іншого ресурса   |

[**Reflector.**](#reflector) Основними функціями ресурсів секції (рефлекторів) є файлові операції (вибір файлів (директорій), копіювання і т.д.).  
Ресурси секції `step` включають поля:    

| Поле           | Опис                                                       |
|----------------|------------------------------------------------------------|
| description    | опис рефлектора                                            |
| recursive      | опція, яка визначає рівень зчитування структури директорії (дет. в туторіалі ["Поняття рефлекторів. Копіювання файлів"](ReflectorUsing.md#recursive-reflector)) |
| filePath       | вказуються шляхи до директорій модуля, управління директоріями  |
| src            | вказуються шляхи до директорій та умови вибору файлів      |
| dst            | директорія в яку будут поміщено файли                      |
| criterion      | умова використання ресурса (див. критеріон)                |
| inherit        | наслідування значень полів іншого ресурса                  |

[**Exported.**](#exported) Секція `will-файла`, автоматично згенерованого при експортуванні модуля. Згенерований при експорті `some_name.out.will` використовується при імпорті підмодуля.  
Ресурси секції `exported` включають поля:  

| Поле                     | Опис                                   |
|--------------------------|----------------------------------------|
| version                  | версія модуля, експортується з секції `about`                         |
| description              | опис експортованого модуля - призначення, ліцензія, автори та ін.     |
| criterion                | критеріони, експортовані з секції `build` при виконанні збірки експорту (див. критеріон) |
| inherit                  | наслідування, яке експортується з секції `build` при виконанні збірки |
| exportedReflector        | рефлектор, за яким побудовано експорт модуля, генерується утилітою    |
| exportedFilesReflector   | рефлектор на експортовані файли, генерується утилітою                 |  
| exportedDirPath          | експортовані директорії, що експотуються                              |
| exportedFilesPath        | шляхи до файлів, генерується утилітою                                 |
| archiveFilePath          | шлях до архівованих файлів створеного модулю                          |

[**Build.**](#build) Ресурси секції (збірки) описують послідовність і умови виконання процедур створення модуля. [Сценарій збірки](#build-assembly-scenario) - послідовність виконання кроків в збірці.   
Ресурси секції `build` включають поля:  

| Поле          | Опис                                            |
|---------------|-------------------------------------------------|
| description   | опис збірки                                     |  
| criterion     | умова побудови модуля (див. критеріон)          |
| steps         | побудова сценарію збірки - полсідовність кроків |
| inherit       | наслідування значень полів іншого ресурса       |
