# Експортування модуля

Експортування модуля для перевикористання його іншим розробником або модулем.

### Поняття експорту модуля

Експорт модуля - особливий вид побудови модульної системи. Результатом експорту модуля є згенерований `out-вілфайл` та, опціонально, архів з файлами модуля. Експортований `out-вілфайл` містить повну інформацію про експортований модуль та використовується для імпорту підмодуля. Тому, для слідкування за змінами модуля, при експорті модуля в `вілфайлі` обов'язково вказується секція `about` з полями `name` i `version`.  

### Початкова конфігурація 
  
<details>
  <summary><u>Структура файлів</u></summary>

```
exportSingle
     ├── fileToExport
     └── .will.yml

```

</details>
<details>
  <summary><u>Код файла <code>.will.yml</code></u></summary>

```yaml
about :
  name : exportModule
  description : "To export single file"
  version : 0.0.1

path :
  in : '.'
  out : 'out'
  fileToExport : 'fileToExport'

step  :
  export.single :
    inherit : predefined.export
    export : path::fileToExport
    tar : 0

build :
  export.single :
    criterion :
      default : 1
      export : 1
    steps :
      - export.single
```

</details>

Для дослідження операції експорту модуля створіть структуру файлів приведену вище. В `вілфайл` внесіть відповідний код.

Секція `path` описує карту шляхів модуля для швидкого орієнтування в його структурі.  
`in` - вбудований шлях, відносно якого розташовуються інші відносні шляхи модуля. В прикладі - коренева директорія файла `.will.yml`.  
`out` - вбудований шлях для експортованих `out-вілфайлів`, вказаний відносно шляху `in`.    
`fileToExport` - шлях до файлів експорту, вказаний користувачем відносно директорії `in`. В прикладі вказує на файл з назвою `fileToExport`.  

Крок `export.single` призначений для експорту. Він має поля:
`inherit` - наслідування вбудованого кроку експортування модуля `predefined.export`.  
`tar` - архівування експортованих файлів (1 - ввімкнене / 0 - вимкнене архівування).  
`export` - шлях до файлу або директорії з файлами для експорту. Використовуйте синтаксис `path::[export.path]` для правильного функціонування утиліти.  

Збірка `export.single`.  
Критеріон `export` вказується в збірках призначених для експорту. При використанні окремо від критеріона `default` він веде себе як звичайний критеріон утиліти `willbe`. А у випадку поєднання критеріонів `default : 1` i `export : 1` створюється збірка експорту модуля за замовчуванням. Таким чином, в одному `вілфайлі` одночасно може вказуватись дві збірки за замовчуванням - побудови і експорту. Запуск експорту за замовчуванням здійснюється фразою `will .export`.  

### Експорт модуля  

<details>
  <summary><u>Вивід команди <code>will .export</code></u></summary>

```
[user@user ~]$ will .export
...
 Exporting export.single
   + Write out will-file /path_to_file/out/exportModule.out.will.yml
   + Exported export.single with 1 files in 0.705s
  Exported export.single in 0.752s
```

</details>
<details>
  <summary><u>Структура модуля після експорту</u></summary>

```
exportSingle
     ├── out
     │    └── exportModule.out.will.yml
     ├── fileToExport
     └── .will.yml

```

</details>

Запустіть експорт модуля (`will .export` в кореневій директорії `.will.yml`).

Після виконання команди утиліта `willbe` згенерувала `out-вілфайл` з назвою `exportModule.out.will.yml` за назвою модуля в секції `about`. Файл поміщено в директорію `out`. Вивід свідчить, що було експортовано один файл визначений в шляху `fileToExport`.

### Підсумок

- Експортовані модулі використовуються для імпорту підмодулів.  
- Критеріон `export` позначає збірки експорту модуля.  
- Поєднання критеріонів `default : 1` i `export : 1` створює збірку експорту модуля за замовчуванням.  
- В модулі може бути дві збірки побудови за замовчуванням - побудови модуля і експорту.

[Наступний туторіал](SubmodulesLocal.md)  
[Повернутись до змісту](../README.md#tutorials)
