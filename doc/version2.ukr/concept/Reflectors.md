## Ресурс рефлектор  

Ресурс секції <code>reflector</code> та спосіб опису множини файлів для виконання якоїсь операції над ними.

### Поля ресурсу `reflector`

| Поле           | Опис                                                       |
|----------------|------------------------------------------------------------|
| description    | Пояснення для інших. розробників                                            |
| recursive      | Включати файли із піддиректорій чи ні. Можливі значення: `0`, `1`, `2`. Значення за замовчуванням `2`. |
| mandatory      | Викидати помилку якщо не знайдено жодного файла. Можливі значення: `0`, `1`. Значення за замовчуванням `1`. |
| filePath       | Мапа шляхів. |
| src            | Філтри файлів над якими потрібно здійснити операцію. |
| dst            | Філтри файлів, в які треба записати результат виконання операції, якщо такий є. |
| criterion      | [Умови](Criterions.md) використання ресурса                |
| inherit        | Наслідування значень полів іншого рефлектора                  |

Поля `src`, `dst` можуть мати під-поля, що описують [файлові фільтри](ReflectorFileFilter.md).   

### Мапа шляхів

Поле рефлектора та спосіб опису множини файлів, котрий дозволяє включити в неї безліч файлів і виключити із неї не потрібні файли за допомогою умов виключення та глобів.

Мапа шляхів може:
- задавати розміщення файлів над якими необхідно виконати, якусь операцію;
- задавати розміщення файлів в які потрібно записати результат операції;
- може вказувати безліч дерикторій;
- безліч умов виключення файлів із вибірки;
- виключення файлів із вибірки, що співпадають із глобом через `false` чи `0`;
- виключення файлів із вибірки, що не співпадають із глобом через `true` чи `1`.

Мапа шляхів може задаватися в полі `filePath` або в полі `src.filePath` чи `dst.filePath` рефлектора. При наслідуванні умови виключення успадковуються( ті котрі `0`, `1`, `false`, `true` ), переліки дерикторій в яких вести пошук переписуються осатннім предком або безпосередньо нащадком.

Виключати файли із вибірки можливо не лише мапою шлхяів, але і [фільтрами файлів](<./ReflectorFileFilter.md#>).

### Приклад складної мапи шляхів

```yaml
src:
  filePath:
    'some/dir1' : null
    'some/dir2' : null
    '**.debug**' : 0
    '**.js' : 1
```

Читається так: переглянути всі файли в дерикторіях `some/dir1` та `some/dir1`, відкинути всі файли, що мають в шляху `.debug` або не зкінчуються розширенням `.js`.

### Поле рефлектора `mandatory`

Поле, яке керує видачею помилки про відсутність файлів за указаним шляхом. При значенні `mandatory : 1` утиліта видасть помилку і завершить побудову, якщо за указаним шляхом не буде знайдено жодного файлів, а при `mandatory : 0` помилки викинуто не буде і процедура побудови продовжеться. За замовчуваням має значення `1`.

### Поле рефлектора `recursive`

Рефлектори мають певний діапазон зчитування файлової системи, який визначається полем `recursive`.  
Поле `recursive` приймає три значення:  
`0` - зчитується файл (директорія) вказана в шляху;
`1` - зчитується файли (директорії), що поміщені за вказаним шляхом (вміст директорій не зчитується);  
`2` - зчитуються файли і директорії на всіх рівнях, що нижче від вказаного в шляху.
За замовчуванням значення поля `recursive : 2` - копіювання всієї структури.

#### Приклади використання поля `recursive`

![recursive.0.png](./Images/recursive.0.png)

При значенні `recursive : 0` буде зчитано лише директорію `proto` указану в шляху `filePath`.  


![recursive.1.png](./Images/recursive.1.png)

При значенні `recursive : 1` буде зчитано вміст директорії `proto`, тобто, файл `some_file.will.yml` i директорію `files`.

![recursive.2.png](./Images/recursive.2.png)

При значенні `recursive : 2` буде зчитано весь вміст директорії `proto`, включаючи файли в директорії `files` і наступних рівнів за наявності.

### Поля `basePath` i `prefixPath`  
Для указання розміщення файлів в фільтрах `src` i `dst` використовуються поля `basePath`, `prefixPath` i `filePath`.  
`basePath` - базовий, основний шлях до файлів. Подібно до шляху `in` в секції `step`, задає початкову точку відліку для шляхів. Зазвичай позначає поточну директорію і не вказується полі `src`.   
`prefixPath` - шлях, який додається до `basePath` i `filePath`.  

#### Приклад формування шляху з полем `prefixPath`   

```yaml
src :
  basePath : '.'
  prefixPath : 'out/out.debug'

```

Приклад показує, що файли будуть братись в директорії за шляхом `./out/out.debug/`, а поміщені в директорію на рівень вище від кореневої директорії `will-файла`.  


## Секція <code>reflector</code>  

Секція містить рефлектори - ресурси для виконання операцій над групами файлів.
Основними операціями є вибір файлів (директорій) та копіювання.

Приклад секції `reflector` з ресурсом `reflect.project`:

![section.reflector.png](./Images/section.reflector.png)
